import{x as te,r as n,j as e,z as se,A as re,B as oe,C as ae,y as ne,h as ce}from"./index-C4bKgq4d.js";import{u as le,c as ie,a as L}from"./index.esm-Bm2CQg2D.js";import{C as B,a as I,R as de}from"./Row-DhJA9odq.js";import{c as y,u as g}from"./ThemeProvider-D_ELZTX6.js";import{C as P}from"./Col-Dj472YVS.js";import{B as N}from"./Button-BWKZGqXl.js";var V={exports:{}},pe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",me=pe,ue=me;function G(){}function M(){}M.resetWarningCache=G;var he=function(){function t(a,c,l,d,f,m){if(m!==ue){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}t.isRequired=t;function s(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:s,element:t,elementType:t,instanceOf:s,node:t,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:M,resetWarningCache:G};return r.PropTypes=r,r};V.exports=he();var fe=V.exports;const R=te(fe);function xe(t,s){return n.Children.toArray(t).some(r=>n.isValidElement(r)&&r.type===s)}const je={type:R.string,tooltip:R.bool,as:R.elementType},_=n.forwardRef(({as:t="div",className:s,type:r="valid",tooltip:a=!1,...c},l)=>e.jsx(t,{...c,ref:l,className:y(s,`${r}-${a?"tooltip":"feedback"}`)}));_.displayName="Feedback";_.propTypes=je;const C=n.createContext({}),U=n.forwardRef(({id:t,bsPrefix:s,className:r,type:a="checkbox",isValid:c=!1,isInvalid:l=!1,as:d="input",...f},m)=>{const{controlId:p}=n.useContext(C);return s=g(s,"form-check-input"),e.jsx(d,{...f,ref:m,type:a,id:t||p,className:y(r,s,c&&"is-valid",l&&"is-invalid")})});U.displayName="FormCheckInput";const O=n.forwardRef(({bsPrefix:t,className:s,htmlFor:r,...a},c)=>{const{controlId:l}=n.useContext(C);return t=g(t,"form-check-label"),e.jsx("label",{...a,ref:c,htmlFor:r||l,className:y(s,t)})});O.displayName="FormCheckLabel";const W=n.forwardRef(({id:t,bsPrefix:s,bsSwitchPrefix:r,inline:a=!1,reverse:c=!1,disabled:l=!1,isValid:d=!1,isInvalid:f=!1,feedbackTooltip:m=!1,feedback:p,feedbackType:F,className:$,style:k,title:b="",type:E="checkbox",label:S,children:i,as:T="input",...u},v)=>{s=g(s,"form-check"),r=g(r,"form-switch");const{controlId:o}=n.useContext(C),j=n.useMemo(()=>({controlId:t||o}),[o,t]),h=!i&&S!=null&&S!==!1||xe(i,O),x=e.jsx(U,{...u,type:E==="switch"?"checkbox":E,ref:v,isValid:d,isInvalid:f,disabled:l,as:T});return e.jsx(C.Provider,{value:j,children:e.jsx("div",{style:k,className:y($,h&&s,a&&`${s}-inline`,c&&`${s}-reverse`,E==="switch"&&r),children:i||e.jsxs(e.Fragment,{children:[x,h&&e.jsx(O,{title:b,children:S}),p&&e.jsx(_,{type:F,tooltip:m,children:p})]})})})});W.displayName="FormCheck";const q=Object.assign(W,{Input:U,Label:O}),H=n.forwardRef(({bsPrefix:t,type:s,size:r,htmlSize:a,id:c,className:l,isValid:d=!1,isInvalid:f=!1,plaintext:m,readOnly:p,as:F="input",...$},k)=>{const{controlId:b}=n.useContext(C);return t=g(t,"form-control"),e.jsx(F,{...$,type:s,size:a,ref:k,readOnly:p,id:c||b,className:y(l,m?`${t}-plaintext`:t,r&&`${t}-${r}`,s==="color"&&`${t}-color`,d&&"is-valid",f&&"is-invalid")})});H.displayName="FormControl";const ye=Object.assign(H,{Feedback:_}),z=n.forwardRef(({className:t,bsPrefix:s,as:r="div",...a},c)=>(s=g(s,"form-floating"),e.jsx(r,{ref:c,className:y(t,s),...a})));z.displayName="FormFloating";const D=n.forwardRef(({controlId:t,as:s="div",...r},a)=>{const c=n.useMemo(()=>({controlId:t}),[t]);return e.jsx(C.Provider,{value:c,children:e.jsx(s,{...r,ref:a})})});D.displayName="FormGroup";const Q=n.forwardRef(({as:t="label",bsPrefix:s,column:r=!1,visuallyHidden:a=!1,className:c,htmlFor:l,...d},f)=>{const{controlId:m}=n.useContext(C);s=g(s,"form-label");let p="col-form-label";typeof r=="string"&&(p=`${p} ${p}-${r}`);const F=y(c,s,a&&"visually-hidden",r&&p);return l=l||m,r?e.jsx(P,{ref:f,as:"label",className:F,htmlFor:l,...d}):e.jsx(t,{ref:f,className:F,htmlFor:l,...d})});Q.displayName="FormLabel";const Y=n.forwardRef(({bsPrefix:t,className:s,id:r,...a},c)=>{const{controlId:l}=n.useContext(C);return t=g(t,"form-range"),e.jsx("input",{...a,type:"range",ref:c,className:y(s,t),id:r||l})});Y.displayName="FormRange";const J=n.forwardRef(({bsPrefix:t,size:s,htmlSize:r,className:a,isValid:c=!1,isInvalid:l=!1,id:d,...f},m)=>{const{controlId:p}=n.useContext(C);return t=g(t,"form-select"),e.jsx("select",{...f,size:r,ref:m,className:y(a,t,s&&`${t}-${s}`,c&&"is-valid",l&&"is-invalid"),id:d||p})});J.displayName="FormSelect";const K=n.forwardRef(({bsPrefix:t,className:s,as:r="small",muted:a,...c},l)=>(t=g(t,"form-text"),e.jsx(r,{...c,ref:l,className:y(s,t,a&&"text-muted")})));K.displayName="FormText";const X=n.forwardRef((t,s)=>e.jsx(q,{...t,ref:s,type:"switch"}));X.displayName="Switch";const ge=Object.assign(X,{Input:q.Input,Label:q.Label}),Z=n.forwardRef(({bsPrefix:t,className:s,children:r,controlId:a,label:c,...l},d)=>(t=g(t,"form-floating"),e.jsxs(D,{ref:d,className:y(s,t),controlId:a,...l,children:[r,e.jsx("label",{htmlFor:a,children:c})]})));Z.displayName="FloatingLabel";const Ne={_ref:R.any,validated:R.bool,as:R.elementType},A=n.forwardRef(({className:t,validated:s,as:r="form",...a},c)=>e.jsx(r,{...a,ref:c,className:y(t,s&&"was-validated")}));A.displayName="Form";A.propTypes=Ne;const w=Object.assign(A,{Group:D,Control:ye,Floating:z,Check:q,Switch:ge,Label:Q,Text:K,Range:Y,Select:J,FloatingLabel:Z}),ee=n.forwardRef(({bsPrefix:t,variant:s,animation:r="border",size:a,as:c="div",className:l,...d},f)=>{t=g(t,"spinner");const m=`${t}-${r}`;return e.jsx(c,{ref:f,...d,className:y(l,m,a&&`${m}-${a}`,s&&`text-${s}`)})});ee.displayName="Spinner";const ke=()=>{const[t,s]=n.useState(!1),[r,a]=n.useState([]),[c,l]=n.useState([]),{data:d}=se(),[f,{isSuccess:m,isLoading:p}]=re(),[F,{isSuccess:$,isLoading:k}]=oe(),[b,{isSuccess:E,isLoading:S}]=ae(),[i,T]=n.useState(),u=le({enableReinitialize:!0,initialValues:{name:i?i.name:"",price:i?i.price:"",description:i?i.description:"",productImg:i?i.productImg:"",quantity:i?i.quantity:""},validationSchema:ie({name:L().required("Enter Name"),price:L().required("Enter price"),description:L().required("Enter description"),quantity:L().required("Enter quantity")}),onSubmit:(o,{resetForm:j})=>{if(i){const h=new FormData;for(const x in o)x!=="productImg"&&h.append(x,o[x]);for(const x of r)h.append("remove",x);for(const x of o.productImg)h.append("productImg",x);F({_id:i._id,fd:h}),T(null)}else{const h=new FormData;for(const x in o)x!=="productImg"&&h.append(x,o[x]);for(const x of o.productImg)h.append("productImg",x);f(h)}l([]),j()}}),v=o=>ce({"form-control my-2":!0,"is-invalid":u.touched[o]&&u.errors[o],"is-valid":u.touched[o]&&!u.errors[o]});return n.useEffect(()=>{m&&ne.success("product create success")},[m]),e.jsxs(e.Fragment,{children:[e.jsx(B,{children:p||S||k?e.jsxs(e.Fragment,{children:["Please wait...",e.jsx(ee,{})]}):e.jsxs(I,{children:[e.jsx(I.Header,{children:" Proctuct Detail"}),e.jsx(I.Body,{children:e.jsx(w,{onSubmit:u.handleSubmit,children:e.jsxs(w.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[e.jsx(w.Control,{...u.getFieldProps("name"),className:v("name"),type:"text",placeholder:"Enter Product"}),e.jsx("span",{className:"invalid-feedback",children:u.errors.name}),e.jsx(w.Control,{...u.getFieldProps("price"),className:v("price"),type:"number",placeholder:"Enter price"}),e.jsx("span",{className:"invalid-feedback",children:u.errors.price}),e.jsx(w.Control,{...u.getFieldProps("description"),className:v("description"),type:"text",placeholder:"Enter description"}),e.jsx("span",{className:"invalid-feedback",children:u.errors.description}),i?e.jsxs(e.Fragment,{children:[i.productImg.map(o=>e.jsx("div",{children:e.jsxs("div",{className:`${r.includes(o)&&"border border-danger my-2"} d-flex align-items-center justify-content-between px-4`,children:[e.jsx("img",{src:o,height:100,className:"me-2 rounded-3"}),r.includes(o)?e.jsx(N,{variant:"dark",onClick:j=>a(r.filter(h=>h!==o)),children:"Cancel"}):e.jsx(N,{onClick:j=>{r.includes(o)||a([...r,o])},children:"Remove"})]})})),t?e.jsxs(e.Fragment,{children:[e.jsx(w.Control,{className:v("productImg"),type:"file",multiple:!0,onChange:o=>{const j=[];for(const h of o.target.files)j.push(URL.createObjectURL(h));u.setFieldValue("productImg",o.target.files),l(j)},placeholder:"Enter new productImg"}),e.jsx(N,{onClick:o=>s(null),className:"me-2",children:"Cancel"})]}):e.jsx(N,{onClick:o=>s(!0),className:"me-2",children:"Add new Image"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w.Control,{className:v("productImg"),type:"file",multiple:!0,onChange:o=>{const j=[];for(const h of o.target.files)j.push(URL.createObjectURL(h));u.setFieldValue("productImg",o.target.files),l(j)},placeholder:"Enter productImg"}),c.map(o=>e.jsx("img",{src:o,height:200,width:200}))]}),e.jsx(w.Control,{...u.getFieldProps("quantity"),className:v("quantity"),type:"number",placeholder:"Enter quantity"}),e.jsx("span",{className:"invalid-feedback",children:u.errors.quantity}),i?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-100 mb-2",variant:"warning",type:"submit",children:"Update product"}),e.jsx(N,{className:"w-100",variant:"outline-dark",type:"button",onClick:o=>T(null),children:"Cancel"})]}):e.jsx(N,{variant:"info",type:"submit",children:"Add product"})]})})})]})}),e.jsx(B,{children:e.jsx(de,{children:e.jsx(P,{children:e.jsxs(I,{children:[e.jsx(I.Header,{children:"All Products"}),e.jsx(I.Body,{children:e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"name"}),e.jsx("th",{scope:"col",children:"price"}),e.jsx("th",{scope:"col",children:"description"}),e.jsx("th",{scope:"col",children:"productImg"}),e.jsx("th",{scope:"col",children:"quantity"}),e.jsx("th",{scope:"col",children:"actions"})]})}),e.jsx("tbody",{children:d&&d.result.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.name}),e.jsx("td",{children:o.price}),e.jsx("td",{children:o.description}),e.jsx("td",{children:o.productImg.map(j=>e.jsx("img",{src:j,height:100,width:100,className:"mx-2 rounded"}))}),e.jsx("td",{children:o.quantity}),e.jsxs("td",{children:[e.jsx(N,{className:"me-2",variant:"warning",onClick:j=>T(o),children:"Edit"}),e.jsx(N,{className:"me-2",variant:"danger",onClick:()=>b(o._id),children:"Delete"})]})]},o._id))})]})})]})})})})]})};export{ke as default};
